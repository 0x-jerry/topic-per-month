<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <link rel="icon" href="/topic-per-month/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微前端</title>
    <script type="module" crossorigin="" src="/topic-per-month/assets/app.d30f2db1.js"></script>
    <link rel="modulepreload" href="/topic-per-month/assets/vendor.446251b2.js">
    <link rel="stylesheet" href="/topic-per-month/assets/app.10784382.css">
  <link rel="modulepreload" crossorigin="" href="/topic-per-month/assets/docs.f4d1b716.js"><link rel="stylesheet" href="/topic-per-month/assets/docs.8b29c859.css"><link rel="modulepreload" crossorigin="" href="/topic-per-month/assets/index.1b6e6e88.js"><meta property="og:title" content="微前端"><meta name="head:count" content="1"></head>
  <body>
    <div id="app" data-server-rendered="true"><!--[--><!--[--><header class="py-3 px-10 transition-shadow flex bg-white fixed-top card"><!--[--><div class="flex-1 flex"><span class="link gray text-4xl" data-v-98fbdd12=""><a href="/topic-per-month//" class="" data-v-98fbdd12=""><!--[--> 每月一「题」 <!--]--></a></span></div><div class="flex-0 flex"><div class="flex items-end"><small class="mx-1 px-3 rounded-full border text-blue-500 border-blue-500">微前端</small><small class="mx-1 px-3 rounded-full border text-blue-500 border-blue-500">2021.09.13 16:03</small><small class="mx-1 px-3 rounded-full border text-blue-500 border-blue-500">0 字 </small><!--[--><small class="mx-1 px-3 rounded-full border text-gray-500 border-gray-500"> # micro-frontend</small><small class="mx-1 px-3 rounded-full border text-gray-500 border-gray-500"> # web</small><!--]--></div></div><!--]--></header><div class="pl-10 pr-70 pb-10 mt-20"><div><div class="markdown-body"><p>本文尝试分享一下「微前端」这个概念，以及目前（2021-06-01）主要的几种实现方案。</p><p></p><div class="table-of-contents"><ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E5%89%8D%E7%AB%AF%EF%BC%9F"> 什么是微前端？</a></li><li><a href="#%E9%82%A3%E4%B9%88%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%88%B0%E5%BA%95%E8%A7%A3%E5%86%B3%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F"> 那么微前端到底解决的是什么问题？</a></li><li><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%9F"> 微前端怎么解决这些问题的？</a><ul><li><a href="#npm-package-%2F-git-submodule"> npm package / git submodule</a></li><li><a href="#iframe"> iframe</a></li><li><a href="#micro-frontend-%E6%A1%86%E6%9E%B6"> micro frontend 框架</a></li></ul></li><li><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%BD%93%E9%AA%8C"> 微前端框架体验</a><ul><li><a href="#luigi"> Luigi</a></li><li><a href="#emp"> EMP</a></li><li><a href="#single-spa"> Single-SPA</a></li><li><a href="#qiankun"> QianKun</a></li><li><a href="#%E5%B0%8F%E7%BB%93"> 小结</a></li></ul></li><li><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"> 微前端需要解决的问题</a><ul><li><a href="#%E6%9C%8D%E5%8A%A1%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98"> 服务更新问题</a></li><li><a href="#%E9%80%9A%E4%BF%A1%E9%97%AE%E9%A2%98"> 通信问题</a></li><li><a href="#%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98"> 样式隔离问题</a></li><li><a href="#%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98"> 环境隔离问题</a></li></ul></li><li><a href="#%E9%9C%80%E8%A6%81%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%90%97%EF%BC%9F"> 需要微前端吗？</a></li><li><a href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"> 推荐阅读</a></li><li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"> 参考文献</a></li></ul></div><p></p><h2 id="%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E5%89%8D%E7%AB%AF%EF%BC%9F" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E5%89%8D%E7%AB%AF%EF%BC%9F" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 什么是微前端？</h2><p>引用一句 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://micro-frontends.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->micro-frontends<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的一句话</p><blockquote><p>Techniques, strategies and recipes for building <strong>a modern web app</strong> with <strong>multiple teams</strong> that can <strong>ship features independently</strong>.</p></blockquote><p>简单翻译一下，大概意思是：用技术、策略和方法隔离不同 <strong>团队</strong> 开发的 <strong>功能</strong>，并构建 <strong>现代化的 web 应用</strong>。</p><p>经常有听到「微前端框架」这个词，那「微前端」是一门技术？不，微前端并不是一门技术，微前端仅仅是一种手段，通过制定一些标准，合作开发这个项目的团队都遵守这些标准。再通过这些标准整合起来的架构，也就成了「微前端」。</p><h2 id="%E9%82%A3%E4%B9%88%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%88%B0%E5%BA%95%E8%A7%A3%E5%86%B3%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E9%82%A3%E4%B9%88%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%88%B0%E5%BA%95%E8%A7%A3%E5%86%B3%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 那么微前端到底解决的是什么问题？</h2><p>想想我最初接触微前端，还是第一份正式工作的时候，当时是在一个创业公司，刚刚成立几个月。我进去的时候，公司有两个应用，一个 A 应用，一个 B 应用，分别对应两个域名。现在公司想做整合，把两个应用的功能整合在一起，组合起来，举个栗子。A 应用有两个页面，分别是 A-1，A-2。现在 B 应用，想要 A-1 这个功能，也就是这个页面，而且想要保持同步更新，也就是，只发布一次，就能同时更新 A 应用中的 A-1 和 B 应用中的 A-1。</p><p>当时的想法比较简单，因为公司用的 vue 框架，而 vue 组件可以打包成一个 js 文件。所以，一个简单的做法，就是把 A 应用中所有功能做成组件，然后打包成一个 js 文件，然后在 B 应用中，引用这个 js 文件，取其中的 A-1 组件，这样也就解决了问题。</p><p>其中核心的代码，大概是这样：</p><div class="language-ts line-numbers-mode"><pre><code v-pre=""><span class="token comment">// &lt;script src="//xxx.A.js"/&gt;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">A1</span> <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>_A

<span class="token keyword">export</span> <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a-1'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token constant">A1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>从这个栗子中，可以看到，解决的问题也就是：如何在一个应用中引入一个不需要自己维护的能力或者功能。</p><p>进而拓展一下，可以理解成，我简单写一个模板，然后配置其中每个模块的功能，这样，一个应用就完成了。每个模板的功能，都交由不同的团队去维护。如果能实现这样的一个工具，那么就能大大的缩短一款产品的开发成本（想想就开心，做梦真好）。</p><p>在写这片文章的时候，有幸读到 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://www.yuque.com/kuitos/gky7yw/rhduwc" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->微前端的核心价值<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>。</p><p>文中用了一整个章节来讨论「微前端」的价值，我简单的总结一下文中的概念，大致是：「微前端」解决的是如何让一个应用存活 3-5 年之后，开发者还能继续为其赋能，就像文章结尾所讲。</p><blockquote><p>那么微前端的使命我认为是：「让天下没有短命的控制台」。</p></blockquote><p>至此，我想，你应该大致对「微前端」有了一个了解。接下来就我们就唠嗑一下怎么解决这些问题。</p><h2 id="%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%9F" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E8%BF%99%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%9F" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 微前端怎么解决这些问题的？</h2><p>微前端，可看作是「微服务」派生出来的一个概念。也有点像 OOP(Object-Oriented Programing) 中的单一原则（Single Responsibility Principle），一个类、方法只做一件事情。</p><p>讲到一件事情，我们就不得不分析业务，把业务剥离开来，抽成一个一个的服务。然后再通过一些技术手段，来整合不同的服务。</p><p>先简单分享一下我想到的几种方式：</p><ol><li>用 npm package / git submodule 来管理</li><li>用 iframe 加载</li><li>开发 micro frontend 框架</li></ol><h3 id="npm-package-%2F-git-submodule" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#npm-package-%2F-git-submodule" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> npm package / git submodule</h3><p>这种方式，用起来就比较简单，就和用普通的 js 模块一样，除了分离出代码，没有任何其它优势。</p><h3 id="iframe" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#iframe" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> iframe</h3><p>因为 iframe 的特性，天然的隔离性，优势也比较明显：运行环境隔离、独立发布。但同时缺点也很多：加载慢，性能堪忧、隔离性太强，以至于 会话状态共享都成了一个问题。</p><p>整体思考下来，iframe 除了隔离性好之外，也没有什么优势。</p><h3 id="micro-frontend-%E6%A1%86%E6%9E%B6" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#micro-frontend-%E6%A1%86%E6%9E%B6" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> micro frontend 框架</h3><p>框架就有很多啦，不同的框架，优势也各不相同。我选了三个不同的轮子，简单的捋一捋里面的原理。</p><ul><li>Luigi: <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->https://github.com/SAP/luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> ，利用 iframe 构建的微服务框架</li><li>EMP: <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->https://github.com/efoxTeam/emp<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> ，使用 webpack5 的 module federation 技术</li><li>Single-SPA: <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/Single-SPA/Single-SPA" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->https://github.com/Single-SPA/Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> ，路由框架</li><li>qiankun: <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->https://github.com/umijs/qiankun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> ，建立在 Single-SPA 之上的解决方案</li></ul><p>接下来，就看看不同框架之间的优劣。</p><h2 id="%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%BD%93%E9%AA%8C" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E4%BD%93%E9%AA%8C" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 微前端框架体验</h2><p>简单的写写每个框架的处理方式，不一定全对，但一定不会全错 😃。</p><h3 id="luigi" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#luigi" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> Luigi</h3><p>先看看 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，一个利用 <code>iframe</code> 构建的后台微服务框架。可看作是一个路由框架，主要用于构建后台配置页面。</p><p>通过 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://docs.luigi-project.io/docs/luigi-core-api?section=luigi-config" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[--><code>Luigi.setConfig</code><!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> API 来配置网站的路由、授权、导航、本地化等。然后 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 框架通过 <code>iframe</code> 切换不同的路由。</p><p>消息机制也是通过 <code>window.postMessage</code> 实现，源代码 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi/blob/883c3924cf2ae83fce400cbfd7bf84f8c11359d7/client/src/helpers.js#L111-L119" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></p><div class="language-js line-numbers-mode"><pre><code v-pre="">  <span class="token function">sendPostMessageToLuigiCore</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>origin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token string">'There is no target origin set. You can specify the target origin by calling LuigiClient.setTargetOrigin("targetorigin") in your micro frontend.'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>路由也是通过封装的 <code>LuigiClient.linkManager</code>、<code>Luigi.navigation</code> 来管理跳转，实际原理也是通过发送消息来实现的，源代码 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi/blob/883c3924cf2ae83fce400cbfd7bf84f8c11359d7/client/src/linkManager.js#L56-L83" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></p><div class="language-js line-numbers-mode"><pre><code v-pre="">  <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> sessionId<span class="token punctuation">,</span> preserveView<span class="token punctuation">,</span> modalSettings<span class="token punctuation">,</span> splitViewSettings<span class="token punctuation">,</span> drawerSettings</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>errorSkipNavigation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>errorSkipNavigation <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modalSettings <span class="token operator">&amp;&amp;</span> splitViewSettings <span class="token operator">&amp;&amp;</span> drawerSettings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token string">'modalSettings, splitViewSettings and drawerSettings cannot be used together. Only modal setting will be taken into account.'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>preserveView <span class="token operator">=</span> preserveView<span class="token punctuation">;</span>
    <span class="token keyword">const</span> relativePath <span class="token operator">=</span> path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> hasIntent <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'?intent='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> navigationOpenMsg <span class="token operator">=</span> <span class="token punctuation">{</span>
      msg<span class="token operator">:</span> <span class="token string">'luigi.navigation.open'</span><span class="token punctuation">,</span>
      sessionId<span class="token operator">:</span> sessionId<span class="token punctuation">,</span>
      params<span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        link<span class="token operator">:</span> path<span class="token punctuation">,</span>
        relative<span class="token operator">:</span> relativePath<span class="token punctuation">,</span>
        intent<span class="token operator">:</span> hasIntent<span class="token punctuation">,</span>
        modal<span class="token operator">:</span> modalSettings<span class="token punctuation">,</span>
        splitView<span class="token operator">:</span> splitViewSettings<span class="token punctuation">,</span>
        drawer<span class="token operator">:</span> drawerSettings
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    helpers<span class="token punctuation">.</span><span class="token function">sendPostMessageToLuigiCore</span><span class="token punctuation">(</span>navigationOpenMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>其它，如生命周期等，也是类似通过发送消息的方式来实现的。</p><p>整体体验下来，不是特别方便，代码有一定的侵入性。由于 <code>iframe</code> 的特性，每次切换，都要请求一下资源，略慢。</p><p><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 体验的差不多了，下一个 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->EMP<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></p><h3 id="emp" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#emp" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> EMP</h3><p>通过官方仓库 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->EMP<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，中<code>projects</code> 里面的示例，体验了一下。</p><p>整体体验下来，开发比较流畅，但是文档目前不太完善。</p><p>主要原理是通过 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->webpack5<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/concepts/module-federation/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->module-federation<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 来加载远程模块。</p><p>因此高度依赖 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->webpack5<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，对于其它打包工具,目前还不能很好的兼容。如果仅仅是当做路由框架，也是可行的。</p><p>因为直接暴露模块，因此没有通信和生命周期的的问题。但是样式隔离问题依旧存在，全局变量污染问题也存在。</p><p>下一个 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></p><h3 id="single-spa" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#single-spa" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> Single-SPA</h3><p>粗略体验，文档完善，社区也很活跃。而且有 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/ssr-overview" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->SSR<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 方案。</p><p><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 整个文档，都在强调 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 是一种思路，具体实现方案，可自行选择。例如 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->qiankun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 和 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->EMP<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 都可看作其一种具体的实现方案。</p><p><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 建议用加载 运行时模块(runtime module) 的方式，来组织「微前端」中不同的服务，例如用，尚在提案阶段的 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/WICG/import-maps" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-maps<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，<span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://caniuse.com/import-maps" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-maps 兼容性<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 或者 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/concepts/module-federation/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->webpack-module-federation<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 功能。</p><p>官方会在处理「微前端」相关问题时，都会推荐一种实现方案，具体方案建议阅读 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 文档。</p><p>下一个 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，一个 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的具体实现方案。</p><h3 id="qiankun" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#qiankun" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> QianKun</h3><p>通过官方的示例，简单体验了一下，相比前几个框架，这个体验下来是最流畅的。接下来，看看 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 中具体细节的一些处理方式。</p><p>关于资源加载部分，乾坤用的是 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/kuitos/import-html-entry" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-html-entry<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的方式。配置就比较简单，直接给一个 <code>html</code> 入口即可。基本原理是把 html 中的标签转移在当前需要挂载的 <code>div</code> 上，如果浏览器环境支持 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Shadow-Dom<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，则会用 <code>shadow dom</code> 来处理环境隔离，具体代码 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun/blob/972872f5fe62ca87b6911fbe8c62b389ac65f9c5/src/loader.ts#L75-L92" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source: Shadow-Dom<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>。</p><p>关于 <code>JavaScript</code> 执行环境，用的是 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/kuitos/import-html-entry" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-html-entry<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的 <code>sandbox</code>，可保证不会污染全局变量。</p><p>关于样式隔离，则是通过自动给每一条样式添加一个 <code>scoped</code> 来实现隔离 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun/blob/972872f5fe62ca87b6911fbe8c62b389ac65f9c5/src/loader.ts#L95-L105" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source: Css-Scoped<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，如果支持 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Shadow-Dom<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 则不需要处理。</p><p>虽然支持 <code>shadow-dom</code>，但是建议不要使用 <code>shadow dom</code>，因为这会导致一些其它问题，例如第三方库中的 <code>Modal</code> 无法使用。</p><p>关于通信，<span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 实现了一套基本的状态管理方案 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://qiankun.umijs.org/api#initglobalstatestate" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Global-State<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>。具体原理，则是通过 全局 实例来处理的。<span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun/blob/HEAD/src/globalState.ts" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source: Global-State<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></p><h3 id="%E5%B0%8F%E7%BB%93" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E5%B0%8F%E7%BB%93" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 小结</h3><p>准确来讲，仅有三个框架，因为 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 主要介绍的是理念。</p><p>三个框架，各有千秋，但是 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 目前看来是相对比较好的方案，代码侵入少，环境隔离好。</p><p>具体的代码看了，接下来聊聊 「微前端」 具体解决了哪些问题。</p><h2 id="%E5%BE%AE%E5%89%8D%E7%AB%AF%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E5%BE%AE%E5%89%8D%E7%AB%AF%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 微前端需要解决的问题</h2><ol><li>服务更新问题</li><li>通信问题</li><li>样式隔离问题</li><li>环境隔离问题</li></ol><h3 id="%E6%9C%8D%E5%8A%A1%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E6%9C%8D%E5%8A%A1%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 服务更新问题</h3><p>关于更新的问题，进一步的问题可以提炼成：关于「微前端」中的不同服务，是否需要主应用来控制版本呢？</p><p>我认为这个答案是否定的，不需要主应用来控制里面服务的版本，也就是主应用里面的服务，无论什么时候都是最新的版本，主应用不关心里面的服务的版本。</p><p>由此，也可确定，服务之间，应该尽可能的减少通信。因为频繁的通信，即可导致耦合较大，就必须要有版本控制，否则，出问题的概率就比较大。</p><h3 id="%E9%80%9A%E4%BF%A1%E9%97%AE%E9%A2%98" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E9%80%9A%E4%BF%A1%E9%97%AE%E9%A2%98" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 通信问题</h3><p>有上一个问题的讨论结果，可得出，通信功能只要满足能用即可。并不要实现特别复杂的机制。</p><p>由不同「微前端」方案，也衍生出不同的通信方案：</p><ol><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 用到的 <code>window.postMessage</code></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 提到的 <code>window.addEventListener/dispatchEvent</code> <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/recommended-setup/#ui-state" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->EMP<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 中自定义的模块，则可直接暴露函数</li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 中自己实现一个 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://qiankun.umijs.org/api#initglobalstatestate" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Global-State<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li></ol><h3 id="%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 样式隔离问题</h3><p>推荐阅读 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/ecosystem-css" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA-CSS<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，样式隔离的一些指导和分析。</p><p><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/ecosystem-css" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA-CSS<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 推荐 一份公用的样式，然后每个服务的样式，都自己去借助工具或者一些技术做到自我隔离。例如 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/css-modules/css-modules" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->css-module<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 技术，或者 <code>Vue</code> 的 <code>scoped</code> 方案。</p><p>但如果使用像 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 这样利用 <code>iframe</code> 的框架，则天然支持样式隔离。</p><p>或者是 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 那样，加载的时候，自动添加上一层 <code>scope</code>。</p><h3 id="%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E7%8E%AF%E5%A2%83%E9%9A%94%E7%A6%BB%E9%97%AE%E9%A2%98" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 环境隔离问题</h3><p>环境隔离，主要问题是全局环境变量的问题。要处理这个问题，第一个想到的肯定就是，人工约定一个格式，先到先得。这种方式够用，但不够友好。</p><p>如果是用 <code>iframe</code>，则没有这个问题。</p><p>看 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->QianKun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的源代码的时候，看到其用到了 <code>Sandbox</code> 这个东西。仔细读了读，实际上是通过 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/kuitos/import-html-entry" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-html-entry<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 的 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/kuitos/import-html-entry/blob/ab3e788ee868177ecf407f79b00d52ca2e2cdd47/src/index.js#L52-L63" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->source: getExecutableScript<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 实现的。</p><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted">&nbsp;</div><br><br></div><pre><code v-pre=""><span class="token keyword">function</span> <span class="token function">getExecutableScript</span><span class="token punctuation">(</span><span class="token parameter">scriptSrc<span class="token punctuation">,</span> scriptText<span class="token punctuation">,</span> proxy<span class="token punctuation">,</span> strictGlobal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sourceUrl <span class="token operator">=</span> <span class="token function">isInlineCode</span><span class="token punctuation">(</span>scriptSrc<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">//# sourceURL=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scriptSrc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span>

  <span class="token comment">// 通过这种方式获取全局 window，因为 script 也是在全局作用域下运行的，所以我们通过 window.proxy 绑定时也必须确保绑定到全局 window 上</span>
  <span class="token comment">// 否则在嵌套场景下， window.proxy 设置的是内层应用的 window，而代码其实是在全局作用域运行的，会导致闭包里的 window.proxy 取的是最外层的微应用的 proxy</span>
  <span class="token keyword">const</span> globalWindow <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> eval<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'window'</span><span class="token punctuation">)</span>
  globalWindow<span class="token punctuation">.</span>proxy <span class="token operator">=</span> proxy
  <span class="token comment">// TODO 通过 strictGlobal 方式切换 with 闭包，待 with 方式坑趟平后再合并</span>
  <span class="token keyword">return</span> strictGlobal
    <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">;(function(window, self, globalThis){with(window){;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scriptText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sourceUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);</span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">;(function(window, self, globalThis){;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scriptText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sourceUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>核心代码，就是 <code>;(function(window, self, globalThis){;${scriptText}\n${sourceUrl}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy)</code> 这一句了。在运行代码的时候，通过闭包机制，替换 <code>window,self,globalThis</code> 三个变量。</p><p>我个人认为，这个方面就看情况了，如果开箱支持，那就用。如果不支持，那也没有必要非得用这种方式，就「约定」的方式也挺好的， 也没什么大问题。</p><h2 id="%E9%9C%80%E8%A6%81%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%90%97%EF%BC%9F" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E9%9C%80%E8%A6%81%E5%BE%AE%E5%89%8D%E7%AB%AF%E5%90%97%EF%BC%9F" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 需要微前端吗？</h2><p>现在，对微前端有了一个整体的认识，我们真的需要微前端吗？</p><p>这个问题，每个人的看法不一样，<strong>这里我就随便聊聊，看看就完事了，当真就输了。是否真的需要，还需自己考虑。</strong></p><p>整体来讲，「微前端」在我看来，应用场景有限，入门需要一定的成本，虽然可以分离业务，也有很多优点。</p><p>但是缺点也很明显，成本上去了，团队交流成本，开发成本都上升了。举一个小例子，有个需求需要应用 A 支持一下，但是应用 A 是其它团队负责，原本估计一天就能搞定的事情，经过交流，确认，最后开发，要三天才能搞定。 在 <span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://www.yuque.com/kuitos/gky7yw/rhduwc" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->qiankun-技术圆桌<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 中也提到过，「微前端」的目的是为了支持不同的技术栈（这点可推导出是为了支持不同的开发团队）。</p><p>因此，在我看来，在项目没有大到一定程度（必须要跨团队）的时候，没必要考虑「微前端」。</p><h2 id="%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 推荐阅读</h2><ul><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://micro-frontends.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->micro-frontends<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，一篇对「微前端」简单介绍的文章。</li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://martinfowler.com/articles/micro-frontends.html" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->martinfowler-micro-frontends<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，分析「微前端」的优劣势，和一些实现方案以及细节处理方式。</li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://www.yuque.com/kuitos/gky7yw/rhduwc" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->qiankun-技术圆桌<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，探讨「微前端」的目的，使命。</li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/microfrontends-concept" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA Concept<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，「微前端」概念介绍，以及开发方向指导。</li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/recommended-setup" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->Single-SPA Recommended-setup<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span>，「微前端」推荐实现方案。</li></ul><h2 id="%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE" tabindex="-1"><span class="link header-anchor" aria-hidden="true" data-v-98fbdd12=""><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE" data-v-98fbdd12=""><!--[-->#<!--]--></a></span> 参考文献</h2><ul><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://micro-frontends.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->micro-frontends<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://martinfowler.com/articles/micro-frontends.html" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->martinfowler-micro-frontends<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->web-component<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://www.yuque.com/kuitos/gky7yw/rhduwc" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->qiankun-技术圆桌<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/concepts/module-federation/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->webpack-module-federation<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/SAP/luigi" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->luigi<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/efoxTeam/emp" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->emp<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/single-spa/single-spa" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->single-spa<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/umijs/qiankun" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->qiankun<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://webpack.js.org/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->webpack5<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://single-spa.js.org/docs/ecosystem-css" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->single-spa-css<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://github.com/kuitos/import-html-entry" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->import-html-entry<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://qiankun.umijs.org/api#initglobalstatestate" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->global-state<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li><li><span class="link" target="_blank" rel="noopener noreferrer" data-v-98fbdd12=""><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[-->shadow-dom<!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span></li></ul></div></div><hr class="mt-15"><div class="my-10 text-center"> 除非特殊说明，否则，本站文章均使用 <span class="link" data-v-98fbdd12=""><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" data-v-98fbdd12=""><span data-v-98fbdd12=""><!--[--> CC BY-NC 4.0 <!--]--></span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" data-v-98fbdd12=""><g fill="none"><path d="M21 3h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M21 3v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="il-md-length-15 il-md-duration-2 il-md-delay-5"></path><path d="M13 11l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-15 il-md-duration-2 il-md-delay-3"></path><path d="M12 5a7 7 0 1 0 7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="il-md-length-40 il-md-duration-3 il-md-delay-0"></path></g></svg></a></span> 许可。 </div><hr><div class="comments py-10"></div></div><!--]--><div class="fixed right-0 bottom-0 transition-transform z-50" style="transform:translate(-2rem, 2rem);"><span class="flex bg-light-600 rounded text-3xl hover:bg-light-400 text-gray-600 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0a.996.996 0 0 0 0-1.41l-6.59-6.59a.996.996 0 0 0-1.41 0l-6.6 6.58a.996.996 0 1 0 1.41 1.41L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1z" fill="currentColor"></path></svg></span></div><!--]--></div>
    
  

</body></html>